{"version":3,"sources":["AppContext.js","StateContext.js","components/SortRestaurants.js","components/StarRating.js","RestaurantContext.js","components/InfoWindowEx.js","components/HomeMap.js","components/PageLoader.js","components/Home.js","components/UpdateRestaurant.js","components/RestaurantReview.js","components/NewRatingInput.js","components/RestaurantMap.js","components/RestaurantDetails.js","components/PageNotFound.js","components/Searchbar.js","components/Header.js","components/Footer.js","components/FlashMessage.js","components/CreateRestaurantPage.js","App.js","index.js"],"names":["AppContext","createContext","StateContext","SortRestaurants","setRestaurants","setRestaurantCollection","restaurantCollection","setSortCount","useState","locationType","setLocationType","location","setLocation","showButton","setShowButton","dispatch","useContext","e","a","preventDefault","axios","get","response","data","slice","type","value","color","className","onClick","onSubmit","onChange","currentTarget","defaultValue","disabled","placeholder","htmlFor","newList","sort","b","rating","pricerange","count","name","localeCompare","prev","id","StarRating","stars","setStars","useEffect","starsList","num","parseFloat","i","push","key","aria-hidden","RestaurantContext","InfoWindowEx","props","infoWindowRef","React","createRef","contentElement","document","createElement","ReactDOM","render","Children","only","children","current","infowindow","setContent","ref","GoogleApiWrapper","apiKey","sortCount","markers","setMarkers","selectedMarker","setSelectedMarker","setRerender","history","useHistory","setKey","length","firstItem","pastList","setPastList","pastSortCount","setPastSortCount","restaurant","map","lat","latitude","lng","longtitude","position","handleMarkerClick","google","zoom","initialCenter","style","width","height","containerStyle","disableDefaultUI","zoomControl","streetViewControl","onClose","visible","images","src","url_location","street","city","province","country","PageLoader","class","Home","isLoading","setIsLoading","restaurants","counter","setCounter","state","window","confirm","delete","filter","restaurantList","fetchData","triggerMoreRestaurants","useCallback","scrollY","innerHeight","body","offsetHeight","handleScrollEvent","_","addEventListener","removeEventListener","Provider","to","querySelector","classList","contains","remove","add","HomeMap","dollarAmount","loggedIn","transform","handleDelete","UpdateRestaurant","description","postalcode","setRestaurant","file","setFile","uploadedImages","setUploadedImages","useParams","params","address","apiResponse","results","geometry","put","priceRange","parseInt","formData","FormData","append","post","headers","updateInput","fetchRestaurantData","required","max","min","urlList","files","n","currentFile","size","URL","createObjectURL","multiple","url","index","RestaurantReview","review","ratings","setRatings","setRatingsCollection","updatePageRating","sumOfRatings","forEach","item","updatedRating","toFixed","message","NewRatingInput","restaurant_id","newRating","setNewRating","sentReview","setSentReview","updateCurrentPageRating","concat","step","coords","RestaurantDetails","ratingsCollection","isMoreRatings","setIsMoreRatings","scrollPosition","setScrollPosition","loadEvent","setLoadEvent","updatedImages","image","scrollToReviewSection","reviewSection","scrollTo","offsetTop","fetchRestaurantReviews","deleteImage","cursor","price","getDollarSignValue","PageNotFound","SingleSearchResult","setSearchQuery","Searchbar","timer","searchQuery","searchResults","setSearchResults","searchLoading","setSearchLoading","showResults","setShowResults","fetchResults","handleHideResults","target","setTimeout","clearTimeout","result","Header","page","setPage","useLocation","pathname","data-toggle","data-target","aria-controls","aria-expanded","aria-label","Footer","FlashMessage","flashMessages","flashMessage","onAnimationEnd","display","handleRemove","CreateRestaurantPage","App","initialState","Boolean","localStorage","getItem","useReducer","action","setItem","removeItem","path","exact","getElementById"],"mappings":"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","file":"static/js/main.237e15a7.chunk.js","sourcesContent":["import React, { createContext } from 'react'\n\nlet AppContext = createContext()\n\nexport default AppContext\n","import React, { createContext } from 'react'\n\nlet StateContext = createContext()\n\nexport default StateContext\n","import React, { useEffect, useState, useContext } from 'react'\nimport axios from 'axios'\nimport AppContext from '../AppContext'\n\nfunction SortRestaurants({ setRestaurants, setRestaurantCollection, restaurantCollection, setSortCount }) {\n  const [locationType, setLocationType] = useState('')\n  const [location, setLocation] = useState('')\n  const [showButton, setShowButton] = useState(false)\n\n  const dispatch = useContext(AppContext)\n\n  async function handleSubmit(e) {\n    e.preventDefault()\n    if (locationType && location) {\n      try {\n        const response = await axios.get(`/api/restaurants/search?locationType=${locationType}&location=${location}`)\n        setRestaurants(response.data.slice(0, 10))\n        setRestaurantCollection(response.data)\n        setLocation('')\n        setShowButton(true)\n      } catch (err) {\n        dispatch({ type: 'FlashMessage', value: err.response.data, color: 'error' })\n      }\n    } else {\n      dispatch({ type: 'FlashMessage', value: 'You cannot leave the fields blank.', color: 'error' })\n    }\n  }\n\n  async function resetRestaurantList() {\n    try {\n      const response = await axios.get('/api/restaurants')\n      setRestaurants(response.data.slice(0, 10))\n      setRestaurantCollection(response.data)\n      setShowButton(false)\n    } catch (err) {\n      dispatch({ type: 'FlashMessage', value: err.response.data, color: 'error' })\n    }\n  }\n\n  function arrangeRestaurants(e) {\n    let newList\n    switch (e.currentTarget.value) {\n      case 'highest-rated':\n        newList = [...restaurantCollection].sort((a, b) => b.rating - a.rating)\n        break\n      case 'lowest-rated':\n        newList = [...restaurantCollection].sort((a, b) => a.rating - b.rating)\n        break\n      case 'price-high-low':\n        newList = [...restaurantCollection].sort((a, b) => b.pricerange - a.pricerange)\n        break\n      case 'price-low-high':\n        newList = [...restaurantCollection].sort((a, b) => a.pricerange - b.pricerange)\n        break\n      case 'most-rated':\n        newList = [...restaurantCollection].sort((a, b) => b.count - a.count)\n        break\n      case 'alphabetical-a-z':\n        newList = [...restaurantCollection].sort((a, b) => a.name.localeCompare(b.name))\n        break\n      case 'alphabetical-z-a':\n        newList = [...restaurantCollection].sort((a, b) => b.name.localeCompare(a.name))\n        break\n      default:\n        newList = [...restaurantCollection]\n        break\n    }\n    setRestaurants(newList.slice(0, 10))\n    setRestaurantCollection(newList)\n    setSortCount(prev => prev + 1)\n  }\n  return (\n    <>\n      <div className=\"text-center mb-3 restaurant-search-container\">\n        {showButton && (\n          <button className=\"btn reset-btn\" onClick={resetRestaurantList}>\n            View All Restaurants\n          </button>\n        )}\n        <h5>Search for restaurants near you...</h5>\n\n        <form onSubmit={handleSubmit} className=\"input-group restaurant-search-form\">\n          <select className=\"custom-select homepage-location-select\" onChange={e => setLocationType(e.currentTarget.value)} defaultValue={'Search by...'}>\n            <option disabled>Search by...</option>\n            <option value=\"street\">Street</option>\n            <option value=\"city\">City</option>\n            <option value=\"province\">Province</option>\n            <option value=\"country\">Country</option>\n            <option value=\"postalcode\">Postal Code</option>\n          </select>\n          <input type=\"text\" className=\"form-control homepage-location-input\" value={location} placeholder={locationType ? `Enter ${locationType}...` : 'Enter location...'} onChange={e => setLocation(e.currentTarget.value)} />\n          <div className=\"input-group-append\">\n            <button type=\"submit\" className=\"btn btn-outline-secondary restaurant-search-btn\">\n              Refine Search\n            </button>\n          </div>\n        </form>\n      </div>\n      <h1 className=\"homepage-title\">Restaurants</h1>\n      <div className=\"input-group sort-input-group\">\n        <div className=\"input-group-prepend\">\n          <label className=\"input-group-text\" htmlFor=\"sort-select\">\n            Sort by:\n          </label>\n        </div>\n        <select className=\"custom-select\" onChange={arrangeRestaurants} id=\"sort-select\" defaultValue=\"Select...\">\n          <option disabled value=\"Select...\">\n            Select...\n          </option>\n          <option value=\"highest-rated\">Highest Rated</option>\n          <option value=\"lowest-rated\">Lowest Rated</option>\n          <option value=\"most-rated\">Most Reviewed</option>\n          <option value=\"price-high-low\">Price: High-Low</option>\n          <option value=\"price-low-high\">Price: Low-High</option>\n          <option value=\"alphabetical-a-z\">Alphabetical (A-Z)</option>\n          <option value=\"alphabetical-z-a\">Alphabetical (Z-A)</option>\n        </select>\n      </div>\n    </>\n  )\n}\n\nexport default SortRestaurants\n","import React, { useEffect, useState } from 'react'\n\nfunction StarRating({ rating, count }) {\n  const [stars, setStars] = useState()\n  useEffect(() => {\n    let starsList = []\n    let num = parseFloat(rating)\n    for (var i = 1; i <= 5; i++) {\n      if (i <= num) {\n        starsList.push(<i key={i} className=\"fa fa-star gold\" aria-hidden=\"true\"></i>)\n      } else if (i - 0.5 <= num) {\n        starsList.push(<i key={i} className=\"fa fa-star-half-o gold\" aria-hidden=\"true\"></i>)\n      } else {\n        starsList.push(<i key={i} className=\"fa fa-star-o gold\" aria-hidden=\"true\"></i>)\n      }\n    }\n    setStars(starsList)\n  }, [rating])\n\n  function getCount() {\n    if (count == 1) {\n      return `(${count} Review)`\n    } else {\n      return `(${count} Reviews)`\n    }\n  }\n\n  return (\n    <>\n      {stars}{' '}\n      {count && (\n        <>\n          <br /> {getCount()}\n        </>\n      )}\n    </>\n  )\n}\n\nexport default StarRating\n","import React, { createContext } from 'react'\n\nlet RestaurantContext = createContext()\n\nexport default RestaurantContext\n","import React, { useEffect } from 'react'\nimport ReactDOM from 'react-dom'\nimport { InfoWindow } from 'google-maps-react'\n\nexport default function InfoWindowEx(props) {\n  const infoWindowRef = React.createRef()\n  const contentElement = document.createElement(`div`)\n\n  useEffect(() => {\n    ReactDOM.render(React.Children.only(props.children), contentElement)\n    infoWindowRef.current.infowindow.setContent(contentElement)\n  }, [props.children])\n\n  return <InfoWindow ref={infoWindowRef} {...props} />\n}\n","import React, { useEffect, useState, useContext } from 'react'\nimport { Map, GoogleApiWrapper, Marker, InfoWindow } from 'google-maps-react'\nimport { useHistory } from 'react-router-dom'\nimport RestaurantContext from '../RestaurantContext'\nimport InfoWindowEx from './InfoWindowEx'\nimport axios from 'axios'\nimport AppContext from '../AppContext'\n\nfunction MapContainer(props) {\n  const { restaurantCollection, sortCount } = useContext(RestaurantContext)\n  const [markers, setMarkers] = useState([])\n  const [selectedMarker, setSelectedMarker] = useState(null)\n  const [rerender, setRerender] = useState(0)\n  const history = useHistory()\n  const dispatch = useContext(AppContext)\n\n  const [key, setKey] = useState(0)\n  const [pastList, setPastList] = useState({\n    length: restaurantCollection.length,\n    firstItem: restaurantCollection[0]\n  })\n  const [pastSortCount, setPastSortCount] = useState(sortCount)\n\n  // Loads new markers ONLY when a search is made\n  useEffect(() => {\n    setMarkers(\n      restaurantCollection.map(restaurant => {\n        let lat = parseFloat(restaurant.latitude)\n        let lng = parseFloat(restaurant.longtitude)\n        return (\n          <Marker\n            key={restaurant.id}\n            position={{ lat, lng }}\n            onClick={() => {\n              handleMarkerClick(restaurant)\n            }}\n          />\n        )\n      })\n    )\n  }, [key])\n\n  // Marker Click Handler\n  async function handleMarkerClick(restaurant) {\n    try {\n      const response = await axios.get(`/api/restaurants/${restaurant.id}`)\n      setSelectedMarker(response.data)\n    } catch (err) {\n      setSelectedMarker(restaurant)\n      dispatch({ type: 'FlashMessage', value: 'Error retrieving restaurant image.', color: 'error' })\n    }\n  }\n\n  // Rerenders the component to fix bug where info window was not appearing on first marker click\n  useEffect(() => {\n    setRerender(prev => prev + 1)\n  }, [selectedMarker])\n\n  // The following code initiates a new default center when a search is performed\n\n  useEffect(() => {\n    if (restaurantCollection.length !== pastList.length) {\n      setSelectedMarker(null)\n      setKey(prev => prev + 1)\n      setPastList({\n        length: restaurantCollection.length,\n        firstItem: restaurantCollection[0]\n      })\n    } else if (restaurantCollection[0] !== pastList.firstItem && sortCount === pastSortCount) {\n      setSelectedMarker(null)\n      setKey(prev => prev + 1)\n      setPastList({\n        length: restaurantCollection.length,\n        firstItem: restaurantCollection[0]\n      })\n    }\n    setPastSortCount(sortCount)\n  }, [restaurantCollection])\n\n  // Redirect\n  function redirectRestaurantDetails(id) {\n    history.push(`/restaurant/${id}`)\n  }\n\n  // Map Component-Specific Code\n  function zoomLevel() {\n    if (restaurantCollection.length > 2) {\n      return 9\n    }\n    return 11\n  }\n\n  function coords() {\n    if (restaurantCollection.length) {\n      return { lat: parseFloat(restaurantCollection[0].latitude), lng: parseFloat(restaurantCollection[0].longtitude) }\n    } else {\n      return { lat: 43.6532, lng: -79.3832 }\n    }\n  }\n\n  const mapStyles = {\n    width: '100%',\n    height: '100%'\n  }\n  const containerStyle = {\n    position: 'relative',\n    height: '50vh',\n    width: '100%'\n  }\n\n  return (\n    <>\n      <Map google={props.google} zoom={zoomLevel()} key={key} initialCenter={coords()} style={mapStyles} containerStyle={containerStyle} disableDefaultUI={true} zoomControl={true} streetViewControl={true}>\n        {markers}\n        {selectedMarker && (\n          <InfoWindowEx\n            onClose={() => setSelectedMarker(null)}\n            position={{\n              lat: parseFloat(selectedMarker.latitude),\n              lng: parseFloat(selectedMarker.longtitude)\n            }}\n            visible={true}\n          >\n            <div className=\"d-flex\">\n              {selectedMarker.images[0] && (\n                <div>\n                  <div style={{ width: '80px', height: '80px' }}>\n                    <img style={{ width: '80px', height: '80px' }} src={selectedMarker.images[0].url_location} />\n                  </div>\n                </div>\n              )}\n              <div className=\"ml-2\">\n                <h5 className=\"m-0 info-window-title\">{selectedMarker.name}</h5>\n                <p className=\"m-0 mt-1\">\n                  {selectedMarker.street}, <br /> {selectedMarker.city}, {selectedMarker.province}, {selectedMarker.country}\n                </p>\n                <button type=\"button\" className=\"btn btn-link m-0 p-0 info-window-link\" onClick={() => redirectRestaurantDetails(selectedMarker.id)}>\n                  View Details\n                </button>\n              </div>\n            </div>\n          </InfoWindowEx>\n        )}\n      </Map>\n    </>\n  )\n}\n\nexport default GoogleApiWrapper({\n  apiKey: `https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=AIzaSyCcbP47PnbbLWJ4T9GdciB5LCrFSSIP-EA`\n})(MapContainer)\n\n/* import React, { useEffect, useState, useContext } from 'react'\nimport { GoogleMap, withScriptjs, withGoogleMap, Marker, InfoWindow } from 'react-google-maps'\nimport RestaurantContext from '../RestaurantContext'\n\nfunction Map(props) {\n  const { restaurantCollection } = useContext(RestaurantContext)\n  const [markers, setMarkers] = useState([])\n  const [selectedMarker, setSelectedMarker] = useState(null)\n\n  useEffect(() => {\n    setMarkers(\n      restaurantCollection.map(restaurant => {\n        let lat = parseFloat(restaurant.latitude)\n        let lng = parseFloat(restaurant.longtitude)\n        return <Marker key={restaurant.id} position={{ lat, lng }} onClick={() => setSelectedMarker(restaurant)} />\n      })\n    )\n  }, [restaurantCollection])\n\n  function coords() {\n    if (restaurantCollection.length) {\n      return { lat: parseFloat(restaurantCollection[0].latitude), lng: parseFloat(restaurantCollection[0].longtitude) }\n    } else {\n      return { lat: 43.6532, lng: -79.3832 }\n    }\n  }\n\n  return (\n    <>\n      <GoogleMap defaultZoom={10} defaultCenter={coords()}>\n        {markers}\n        {selectedMarker && (\n          <InfoWindow\n            position={{\n              lat: parseFloat(selectedMarker.latitude),\n              lng: parseFloat(selectedMarker.longtitude)\n            }}\n            onCloseClick={() => {\n              setSelectedMarker(null)\n            }}\n          >\n            <div>{selectedMarker.name}</div>\n          </InfoWindow>\n        )}\n      </GoogleMap>\n    </>\n  )\n}\n\nconst WrappedMap = withScriptjs(withGoogleMap(Map))\n\nfunction HomeMap(props) {\n  const { restaurantCollection, sortCount } = useContext(RestaurantContext)\n  const [pastList, setPastList] = useState({\n    length: restaurantCollection.length,\n    firstItem: restaurantCollection[0]\n  })\n  const [pastSortCount, setPastSortCount] = useState(sortCount)\n\n  const [key, setKey] = useState(0)\n  useEffect(() => {\n    if (restaurantCollection.length !== pastList.length) {\n      setKey(prev => prev + 1)\n      setPastList({\n        length: restaurantCollection.length,\n        firstItem: restaurantCollection[0]\n      })\n    } else if (restaurantCollection[0] !== pastList.firstItem && sortCount === pastSortCount) {\n      setKey(prev => prev + 1)\n      setPastList({\n        length: restaurantCollection.length,\n        firstItem: restaurantCollection[0]\n      })\n    }\n    setPastSortCount(sortCount)\n  }, [restaurantCollection])\n  return (\n    <div style={{ width: '100vw', height: '100vh' }}>\n      <WrappedMap key={key} googleMapURL={`https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=${process.env.REACT_APP_API_KEY}`} loadingElement={<div style={{ height: '100%' }} />} containerElement={<div style={{ height: '100%' }} />} mapElement={<div style={{ height: '100%' }} />} />\n    </div>\n  )\n}\n\nexport default HomeMap */\n","import React, { useEffect } from 'react'\n\nfunction PageLoader() {\n  return (\n    <div className=\"loader-container\">\n      <div class=\"loadingio-spinner-rolling-ri5wrc9miih\">\n        <div class=\"ldio-wto04iekdc\">\n          <div></div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default PageLoader\n","import React, { useEffect, useState, useContext, useCallback } from 'react'\nimport * as _ from 'underscore'\nimport axios from 'axios'\nimport { Link, useHistory } from 'react-router-dom'\nimport AppContext from '../AppContext'\nimport StateContext from '../StateContext'\nimport SortRestaurants from './SortRestaurants'\nimport StarRating from './StarRating'\nimport HomeMap from './HomeMap'\nimport RestaurantContext from '../RestaurantContext'\nimport PageLoader from './PageLoader'\n\nfunction Home(props) {\n  // Set up state\n  const [isLoading, setIsLoading] = useState(true)\n  const [restaurantCollection, setRestaurantCollection] = useState([])\n  const [restaurants, setRestaurants] = useState([])\n  const [counter, setCounter] = useState(10)\n  const [sortCount, setSortCount] = useState(0)\n\n  let history = useHistory()\n  const dispatch = useContext(AppContext)\n  const state = useContext(StateContext)\n\n  // Acquire restaurant data on page load\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const response = await axios.get('/api/restaurants')\n        // Sorts by highest rated\n        const restaurantList = response.data.sort((a, b) => b.rating - a.rating)\n        setRestaurantCollection(restaurantList)\n        setRestaurants(restaurantList.slice(0, 10))\n        setIsLoading(false)\n      } catch (err) {\n        dispatch({ type: 'FlashMessage', value: 'Server is temporarily down. Please try again later.', color: 'error' })\n      }\n    }\n    fetchData()\n  }, [])\n\n  // Handles Delete Button Click\n  async function handleDelete(id) {\n    const confirm = window.confirm('Are you sure you want to delete this post?')\n    if (confirm) {\n      try {\n        await axios.delete(`/api/restaurants/${id}`)\n        setRestaurants(prev => prev.filter(restaurant => restaurant.id !== id))\n        setRestaurantCollection(prev => prev.filter(restaurant => restaurant.id !== id))\n        dispatch({ type: 'FlashMessage', value: 'Restaurant was successfully deleted!', color: 'success' })\n      } catch (err) {\n        dispatch({ type: 'FlashMessage', value: err.response.data, color: 'error' })\n      }\n    }\n  }\n\n  // Loads more restuarants when scrolled to bottom of screen\n  const triggerMoreRestaurants = useCallback(() => {\n    if (window.scrollY + window.innerHeight >= document.body.offsetHeight) {\n      setCounter(prev => prev + 10)\n    }\n  }, [])\n\n  // Throttles scroll event\n  const handleScrollEvent = useCallback(_.throttle(triggerMoreRestaurants, 200), [])\n\n  // Adds scroll event listener to trigger infinite load functionality\n  useEffect(() => {\n    window.addEventListener('scroll', handleScrollEvent)\n    return () => window.removeEventListener('scroll', handleScrollEvent)\n  }, [restaurantCollection])\n\n  // Handles Load More Button Functionality\n  useEffect(() => {\n    setRestaurants(restaurantCollection.slice(0, counter))\n    if (restaurantCollection.length && counter >= restaurantCollection.length) {\n      window.removeEventListener('scroll', handleScrollEvent)\n    }\n  }, [counter])\n\n  // Toggles Map Info Tab\n  function toggleInfoTab() {\n    if (document.querySelector('.home-map-info-container').classList.contains('map-info-hidden')) {\n      document.querySelector('.home-map-info-container').classList.remove('map-info-hidden')\n    } else {\n      document.querySelector('.home-map-info-container').classList.add('map-info-hidden')\n    }\n  }\n\n  // Send back loading page until data has been retrieved\n  if (isLoading) {\n    return <PageLoader />\n  }\n\n  return (\n    <>\n      <RestaurantContext.Provider value={{ restaurantCollection, sortCount }}>\n        <div>\n          <div className=\"home-map-info-container\">\n            <div className=\"home-map-info\">\n              {restaurants && (\n                <>\n                  {restaurants.map(restaurant => {\n                    let dollarAmount = ''\n                    for (var i = 0; i < restaurant.pricerange; i++) {\n                      dollarAmount += '$'\n                    }\n                    return (\n                      <div key={restaurant.id} className=\"border p-2 google-maps-result\">\n                        <div className=\"d-flex justify-content-between mt-1 mb-0\">\n                          <h4 className=\"my-0\">{restaurant.name}</h4>\n                          <div className=\"mr-1 mt-1\">{restaurant.rating ? <StarRating rating={restaurant.rating} /> : 'No Ratings'}</div>\n                        </div>\n                        <p className=\"m-0 mt-1\">\n                          {restaurant.street}, <br /> {restaurant.city}, {restaurant.province}, {restaurant.country}\n                        </p>\n                        <div>\n                          <Link to={`/restaurant/${restaurant.id}`}>View Details</Link>\n                        </div>\n                      </div>\n                    )\n                  })}\n                </>\n              )}\n            </div>\n            <button className=\"close-map-info-btn\" onClick={() => toggleInfoTab()}>\n              <i className=\"fa fa-caret-right\" aria-hidden=\"true\"></i>\n            </button>\n          </div>\n          <HomeMap />\n        </div>\n      </RestaurantContext.Provider>\n      <SortRestaurants setRestaurants={setRestaurants} setSortCount={setSortCount} setRestaurantCollection={setRestaurantCollection} restaurantCollection={restaurantCollection} />\n      <div className=\"restaurant-list-container\">\n        {restaurants && (\n          <>\n            {restaurants.map(restaurant => {\n              let dollarAmount = ''\n              for (var i = 0; i < restaurant.pricerange; i++) {\n                dollarAmount += '$'\n              }\n              return (\n                <div key={restaurant.id} className=\"restaurant-list-item\">\n                  <div className=\"d-flex justify-content-between\">\n                    <div>\n                      <h3 className=\"restaurant-list-item-title mb-0\">{restaurant.name}</h3>\n                      <div>Price: {dollarAmount}</div>\n                      <p className=\"text-left mb-0\">\n                        {restaurant.street}, <br /> {restaurant.city}, {restaurant.province}, {restaurant.country}\n                      </p>\n                      <div>\n                        <Link to={`/restaurant/${restaurant.id}`}>View Details</Link>\n                      </div>\n                    </div>\n                    <div>\n                      <div>{restaurant.rating ? <StarRating rating={restaurant.rating} count={restaurant.count} /> : 'No Ratings'}</div>\n                      {state.loggedIn && (\n                        <div className=\"text-right\" style={{ transform: 'translateX(-10%)' }}>\n                          <Link to={`/restaurant/${restaurant.id}/update`} className=\"btn btn-outline-secondary my-1 edit-btn\">\n                            <i className=\"fa fa-pencil mr-1\" aria-hidden=\"true\"></i> Edit\n                          </Link>\n                          <br />\n                          <button onClick={() => handleDelete(restaurant.id)} className=\"btn btn-outline-secondary my-1 delete-btn\">\n                            <i className=\"fa fa-trash-o mr-1\" aria-hidden=\"true\"></i> Delete\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              )\n            })}\n          </>\n        )}\n      </div>\n      {!restaurants.length && <h1>No Results found...</h1>}\n      {/* {{isMoreResults && <button onClick={() => setCounter(prev => prev + 10)}>Load More Restaurants</button>}} */}\n    </>\n  )\n}\n\nexport default Home\n","import React, { useEffect, useState, useContext } from 'react'\nimport { useParams, useHistory } from 'react-router-dom'\nimport axios from 'axios'\nimport AppContext from '../AppContext'\nimport StateContext from '../StateContext'\nimport PageLoader from './PageLoader'\n\nfunction UpdateRestaurant(props) {\n  const [isLoading, setIsLoading] = useState(true)\n  const [restaurant, setRestaurant] = useState({\n    name: '',\n    description: '',\n    pricerange: '',\n    street: '',\n    city: '',\n    province: '',\n    country: '',\n    postalcode: ''\n  })\n  const [file, setFile] = useState()\n  const [uploadedImages, setUploadedImages] = useState()\n\n  let history = useHistory()\n  const dispatch = useContext(AppContext)\n  const state = useContext(StateContext)\n  const { id } = useParams()\n\n  // Redirect if user not logged in\n  useEffect(() => {\n    if (!state.loggedIn) {\n      history.push('/')\n      dispatch({ type: 'FlashMessage', value: 'You do not have the authorization to view that page.', color: 'error' })\n    }\n  }, [state.loggedIn])\n\n  useEffect(() => {\n    if (state.loggedIn) {\n      async function fetchRestaurantData() {\n        try {\n          const response = await axios.get(`/api/restaurants/${id}`)\n          setRestaurant(response.data)\n          setIsLoading(false)\n        } catch (err) {\n          dispatch({ type: 'FlashMessage', value: err.response.data, color: 'error' })\n          history.push('/')\n        }\n      }\n      fetchRestaurantData()\n    }\n  }, [id])\n\n  async function submitHandler(e) {\n    e.preventDefault()\n    try {\n      let location = `${restaurant.street} ${restaurant.city} ${restaurant.province} ${restaurant.country}`\n      const apiResponse = await axios.get('https://maps.googleapis.com/maps/api/geocode/json', {\n        params: {\n          address: location,\n          key: 'AIzaSyCcbP47PnbbLWJ4T9GdciB5LCrFSSIP-EA'\n        }\n      })\n      let lat = apiResponse.data.results[0].geometry.location.lat\n      let lng = apiResponse.data.results[0].geometry.location.lng\n\n      // Update restaurant details in database\n      const response = await axios.put(`/api/restaurants/${id}`, {\n        name: restaurant.name,\n        description: restaurant.description,\n        priceRange: parseInt(restaurant.pricerange),\n        street: restaurant.street,\n        city: restaurant.city,\n        province: restaurant.province,\n        country: restaurant.country,\n        postalcode: restaurant.postalcode,\n        longtitude: lng,\n        latitude: lat\n      })\n\n      if (file) {\n        let formData = new FormData()\n        for (let i = 0; i < file.length; i++) {\n          formData.append(`image`, file[i])\n        }\n\n        await axios.post(`/api/restaurants/upload-image/${response.data.id}`, formData, {\n          headers: { 'Content-Type': 'multipart/form-data' }\n        })\n      }\n\n      history.push(`/restaurant/${id}`)\n      dispatch({ type: 'FlashMessage', value: 'Restaurant was successfully updated!', color: 'success' })\n    } catch (err) {\n      dispatch({ type: 'FlashMessage', value: err.response.data, color: 'error' })\n    }\n  }\n\n  // Update field input\n  function updateInput(e) {\n    setRestaurant({ ...restaurant, [e.currentTarget.name]: e.currentTarget.value })\n  }\n\n  // Update File State\n  function updateFileState(e) {\n    let urlList = []\n    let files = []\n    // Loops over uploaded files, and only saves png/jpeg files that are below 2MB\n    for (var i = 0, n = e.currentTarget.files.length; i < n; i++) {\n      let currentFile = e.currentTarget.files[i]\n      if (currentFile.type == 'image/png' || currentFile.type == 'image/jpeg') {\n        // Make sure file is less than 2MB\n        if (currentFile.size < 2097152) {\n          files.push(currentFile)\n          urlList.push(URL.createObjectURL(currentFile))\n        } else {\n          dispatch({ type: 'FlashMessage', value: `${currentFile.name} is too big! Images must be below 2MB`, color: 'error' })\n        }\n      }\n    }\n    setFile(files)\n    setUploadedImages(urlList)\n  }\n\n  if (isLoading) {\n    return <PageLoader />\n  }\n\n  return (\n    <>\n      <div className=\"restaurant-form\">\n        <h1 className=\"create-title\">Update Restaurant</h1>\n        <form onSubmit={submitHandler}>\n          <div className=\"form-group\">\n            <label htmlFor=\"name\">Name:</label>\n            <input className=\"form-control\" id=\"name\" name=\"name\" placeholder=\"Name\" type=\"text\" value={restaurant.name} onChange={e => updateInput(e)} required />\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"street\">Street:</label>\n            <input className=\"form-control\" id=\"street\" name=\"street\" placeholder=\"Street\" type=\"text\" value={restaurant.street} onChange={e => updateInput(e)} required />\n          </div>\n          <div className=\"form-row\">\n            <div className=\"form-group col-md-4\">\n              <label htmlFor=\"city\">City:</label>\n              <input className=\"form-control\" id=\"city\" name=\"city\" placeholder=\"City\" type=\"text\" value={restaurant.city} onChange={e => updateInput(e)} required />\n            </div>\n            <div className=\"form-group col-md-4\">\n              <label htmlFor=\"province\">Province:</label>\n              <input className=\"form-control\" id=\"province\" name=\"province\" placeholder=\"Province\" type=\"text\" value={restaurant.province} onChange={e => updateInput(e)} required />\n            </div>\n            <div className=\"form-group col-md-4\">\n              <label htmlFor=\"country\">Country:</label>\n              <input className=\"form-control\" id=\"country\" name=\"country\" placeholder=\"Country\" type=\"text\" value={restaurant.country} onChange={e => updateInput(e)} required />\n            </div>\n          </div>\n\n          <div className=\"form-row\">\n            <div className=\"form-group col-md-4\">\n              <label htmlFor=\"postalcode\">Postal Code:</label>\n              <input className=\"form-control\" id=\"postalcode\" name=\"postalcode\" placeholder=\"Postal Code\" type=\"text\" value={restaurant.postalcode} onChange={e => updateInput(e)} required />\n            </div>\n            <div className=\"form-group col-md-4\">\n              <label htmlFor=\"pricerange\">Price Range:</label>\n              <input className=\"form-control\" id=\"pricerange\" name=\"pricerange\" placeholder=\"Price Range\" type=\"number\" value={restaurant.pricerange} onChange={e => updateInput(e)} required max=\"5\" min=\"1\" />\n            </div>\n            <div className=\"form-group col-md-4\">\n              <label>Add Photos (Optional):</label>\n              <div className=\"custom-file\">\n                <input type=\"file\" className=\"custom-file-input\" id=\"image-file\" onChange={updateFileState} multiple />\n                <label className=\"custom-file-label\" htmlFor=\"image-file\">\n                  Choose file...\n                </label>\n              </div>\n            </div>\n          </div>\n          {uploadedImages && uploadedImages[0] && <label>New Images:</label>}\n          <div className=\"image-container\">\n            {uploadedImages &&\n              uploadedImages.map((url, index) => (\n                <div key={index}>\n                  <div style={{ width: '70px', height: '70px' }}>\n                    <img style={{ width: '70px', height: '70px' }} src={url} />\n                  </div>\n                </div>\n              ))}\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"description\">Description:</label>\n            <textarea className=\"form-control\" id=\"description\" name=\"description\" placeholder=\"Description\" type=\"text\" value={restaurant.description} onChange={e => updateInput(e)} required />\n          </div>\n          <div className=\"my-4\"></div>\n          <button type=\"submit\" className=\"btn create-btn btn-block mx-auto\">\n            Update Restaurant\n          </button>\n        </form>\n      </div>\n    </>\n  )\n}\n\nexport default UpdateRestaurant\n","import React, { useEffect, useState, useContext } from 'react'\nimport axios from 'axios'\nimport AppContext from '../AppContext'\nimport StateContext from '../StateContext'\nimport StarRating from './StarRating'\n\nfunction RestaurantReview(props) {\n  const { review, ratings, setRatings, restaurant, setRestaurant, setRatingsCollection } = props\n\n  const dispatch = useContext(AppContext)\n  const state = useContext(StateContext)\n\n  async function handleDelete() {\n    try {\n      await axios.delete(`/api/ratings/${review.id}`)\n      // Update the rating & count displayed on page\n      updatePageRating()\n      // Remove from page\n      setRatings(prev => prev.filter(rating => rating.id !== review.id))\n      setRatingsCollection(prev => prev.filter(rating => rating.id !== review.id))\n      dispatch({ type: 'FlashMessage', value: 'Review was successfully deleted!', color: 'success' })\n    } catch (err) {\n      dispatch({ type: 'FlashMessage', value: err.response.data, color: 'error' })\n    }\n  }\n\n  function updatePageRating() {\n    let sumOfRatings = 0\n    // Add each rating to the sum\n    ratings.forEach(item => {\n      sumOfRatings += parseFloat(item.rating)\n    })\n    // Subtracts the deleted rating from sum\n    sumOfRatings -= parseFloat(review.rating)\n    // Calculates new rating\n    let updatedRating = (sumOfRatings / (ratings.length - 1)).toFixed(1)\n    // Updates the restaurants rating & count state\n    setRestaurant({ ...restaurant, rating: updatedRating, count: restaurant.count - 1 })\n  }\n\n  function reviewColor() {\n    if (review.rating < 3) {\n      return 'bg-danger'\n    } else {\n      return 'bg-success'\n    }\n  }\n\n  return (\n    <div className=\"review-container\">\n      <div>{review.name}</div>\n      <div>\n        <StarRating rating={review.rating} />\n      </div>\n      <p>{review.message}</p>\n      {state.loggedIn && (\n        <button type=\"submit\" className=\"review-btn btn btn-light\" onClick={handleDelete}>\n          <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\n        </button>\n      )}\n    </div>\n  )\n}\n\nexport default RestaurantReview\n","import React, { useEffect, useState, useContext } from 'react'\nimport axios from 'axios'\nimport AppContext from '../AppContext'\n\nfunction NewRatingInput({ id, setRatings, ratings, setRestaurant, restaurant, setRatingsCollection }) {\n  const [newRating, setNewRating] = useState({\n    restaurant_id: id,\n    rating: '',\n    name: '',\n    message: ''\n  })\n  const [sentReview, setSentReview] = useState(false)\n  const dispatch = useContext(AppContext)\n\n  function updateInput(e) {\n    setNewRating({ ...newRating, [e.currentTarget.name]: e.currentTarget.value })\n  }\n\n  async function onSubmit(e) {\n    e.preventDefault()\n    setSentReview(true)\n    // Confirms fields have values & rating is between 1-5 before sending request to server\n    if (newRating.restaurant_id && 1 <= parseFloat(newRating.rating) <= 5 && newRating.name && newRating.message) {\n      try {\n        // Sends off request to store new rating in database\n        const response = await axios.post(`/api/ratings/`, {\n          restaurant_id: newRating.restaurant_id,\n          rating: parseFloat(newRating.rating),\n          name: newRating.name,\n          message: newRating.message\n        })\n        // Update the rating & count displayed on page\n        updateCurrentPageRating(newRating.rating)\n        // Add the new review to the page\n        setRatings(prev => [response.data].concat(prev))\n        setRatingsCollection(prev => [response.data].concat(prev))\n        // Reset the form field inputs to empty\n        setNewRating({ restaurant_id: id, rating: '', name: '', message: '' })\n        // Sends off success message\n        dispatch({ type: 'FlashMessage', value: 'Review was successfully published!', color: 'success' })\n      } catch (err) {\n        dispatch({ type: 'FlashMessage', value: err.response.data, color: 'error' })\n      }\n    } else {\n      dispatch({ type: 'FlashMessage', value: 'You cannot leave the fields blank.', color: 'error' })\n    }\n  }\n\n  function updateCurrentPageRating(newRating) {\n    let sumOfRatings = parseFloat(newRating)\n    // Loops over each rating to get sum\n    ratings.forEach(review => {\n      sumOfRatings += parseFloat(review.rating)\n    })\n    // Calculates new average rating\n    let updatedRating = (sumOfRatings / (ratings.length + 1)).toFixed(1)\n    // Updates the state\n    setRestaurant({ ...restaurant, rating: updatedRating, count: parseInt(restaurant.count) + 1 })\n  }\n\n  return (\n    <div className=\"review-form-container\">\n      <h2 className=\"text-center\">Write A Review</h2>\n      <form onSubmit={onSubmit}>\n        <div className=\"form-row\">\n          <div className=\"form-group col-md-8\">\n            <label htmlFor=\"name\">Name:</label>\n            <input className=\"form-control\" id=\"name\" type=\"text\" name=\"name\" placeholder=\"Name\" value={newRating.name} onChange={e => updateInput(e)} />\n          </div>\n          <div className=\"form-group col-md-4\">\n            <label htmlFor=\"rating\">Rating:</label>\n            <input className=\"form-control\" id=\"rating\" type=\"number\" name=\"rating\" placeholder=\"Rating\" value={newRating.rating} onChange={e => updateInput(e)} min=\"1\" max=\"5\" step=\"0.1\" />\n          </div>\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"message\">Message:</label>\n          <textarea className=\"form-control\" id=\"message\" type=\"text\" name=\"message\" placeholder=\"Message\" value={newRating.message} onChange={e => updateInput(e)} />\n        </div>\n        <button className=\"btn new-rating-btn btn-block mx-auto\" type=\"submit\" disabled={sentReview}>\n          Submit Review\n        </button>\n      </form>\n    </div>\n  )\n}\n\nexport default NewRatingInput\n","import React, { useEffect } from 'react'\nimport { Map, GoogleApiWrapper, Marker } from 'google-maps-react'\n\nfunction RestaurantMap(props) {\n  const { restaurant } = props\n  const coords = { lat: restaurant.latitude, lng: restaurant.longtitude }\n\n  const mapStyles = {\n    width: '100%',\n    height: '100%'\n  }\n  const containerStyle = {\n    position: 'relative',\n    height: '300px',\n    width: '300px'\n  }\n\n  return (\n    <>\n      <Map google={props.google} zoom={14} initialCenter={coords} style={mapStyles} containerStyle={containerStyle} disableDefaultUI={true} zoomControl={true} streetViewControl={true}>\n        <Marker position={coords} />\n      </Map>\n    </>\n  )\n}\n\nexport default GoogleApiWrapper({\n  apiKey: `https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=AIzaSyCcbP47PnbbLWJ4T9GdciB5LCrFSSIP-EA`\n})(RestaurantMap)\n","import React, { useEffect, useState, useContext } from 'react'\nimport { useParams, useHistory, Link } from 'react-router-dom'\nimport axios from 'axios'\nimport RestaurantReview from './RestaurantReview'\nimport NewRatingInput from './NewRatingInput'\nimport AppContext from '../AppContext'\nimport StateContext from '../StateContext'\nimport StarRating from './StarRating'\nimport RestaurantMap from './RestaurantMap'\nimport PageLoader from './PageLoader'\n\nfunction RestaurantDetails(props) {\n  const [isLoading, setIsLoading] = useState(true)\n  const [restaurant, setRestaurant] = useState()\n  const [ratings, setRatings] = useState([])\n  const [ratingsCollection, setRatingsCollection] = useState([])\n  const [counter, setCounter] = useState(8)\n  const [isMoreRatings, setIsMoreRatings] = useState(false)\n  const [scrollPosition, setScrollPosition] = useState(0)\n  const [loadEvent, setLoadEvent] = useState(0)\n\n  const history = useHistory()\n  const { id } = useParams()\n  const dispatch = useContext(AppContext)\n  const state = useContext(StateContext)\n\n  useEffect(() => {\n    async function fetchRestaurantData() {\n      try {\n        const response = await axios.get(`/api/restaurants/${id}`)\n        setRestaurant(response.data)\n        fetchRestaurantReviews()\n      } catch (err) {\n        dispatch({ type: 'FlashMessage', value: 'A restaurant with that id does not exist', color: 'error' })\n        history.push('/')\n      }\n    }\n    async function fetchRestaurantReviews() {\n      try {\n        const response = await axios.get(`/api/ratings/${id}`)\n        setRatingsCollection(response.data)\n        setRatings(response.data.slice(0, counter))\n        if (response.data.length > 8) setIsMoreRatings(true)\n        setIsLoading(false)\n      } catch (err) {\n        dispatch({ type: 'FlashMessage', value: err.response.data, color: 'error' })\n      }\n    }\n    fetchRestaurantData()\n  }, [id])\n\n  // Handle Restaurant Image Delete\n  async function deleteImage(id) {\n    const confirm = window.confirm('Are you sure you want to delete this image?')\n    if (confirm) {\n      try {\n        await axios.delete(`/api/restaurants/delete-image/${id}`)\n        let updatedImages = restaurant.images.filter(image => image.id !== id)\n        setRestaurant({ ...restaurant, images: updatedImages })\n        dispatch({ type: 'FlashMessage', value: 'Image deleted successfully!', color: 'success' })\n      } catch (err) {\n        dispatch({ type: 'FlashMessage', value: err.response.data, color: 'error' })\n      }\n    }\n  }\n\n  // Handle Restaurant Delete Button Click\n  async function handleDelete(id) {\n    const confirm = window.confirm('Are you sure you want to delete this restaurant?')\n    if (confirm) {\n      try {\n        await axios.delete(`/api/restaurants/${id}`)\n        dispatch({ type: 'FlashMessage', value: 'Restaurant was successfully deleted!', color: 'success' })\n        history.push('/')\n      } catch (err) {\n        dispatch({ type: 'FlashMessage', value: err.response.data, color: 'error' })\n      }\n    }\n  }\n\n  // Handle Load More Button\n  useEffect(() => {\n    setScrollPosition(window.scrollY)\n    setRatings(ratingsCollection.slice(0, counter))\n    setLoadEvent(prev => prev + 1)\n    if (ratingsCollection.length && counter >= ratingsCollection.length) {\n      setIsMoreRatings(false)\n    }\n  }, [counter])\n\n  // Restores current page position after loading new ratings\n  useEffect(() => {\n    window.scrollTo(0, scrollPosition)\n  }, [loadEvent])\n\n  // Get price range in dollar sign form\n  function getDollarSignValue(price) {\n    let dollarAmount = ''\n    for (var i = 0; i < price; i++) {\n      dollarAmount += '$'\n    }\n    return dollarAmount\n  }\n\n  // Handles \"Write Review\" Button Click\n  function scrollToReviewSection() {\n    const reviewSection = document.querySelector('.review-form-container')\n    window.scrollTo(0, reviewSection.offsetTop - 30)\n  }\n\n  if (isLoading) {\n    return <PageLoader />\n  }\n\n  return (\n    <>\n      {restaurant.images.length > 0 && (\n        <div className=\"restaurant-images-container\">\n          {restaurant.images.map(image => (\n            <div key={image.id}>\n              <div className=\"restaurant-image-container\">\n                {state.loggedIn && (\n                  <button className=\"remove-image-btn btn btn-light\" onClick={() => deleteImage(image.id)}>\n                    <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\n                  </button>\n                )}\n                <img className=\"restaurant-img\" src={image.url_location} />\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      <div className=\"text-center\">\n        <h1 className=\"mt-3 restaurant-title\">{restaurant.name}</h1>\n        <div style={{ cursor: 'pointer' }} onClick={() => scrollToReviewSection()}>\n          {restaurant.rating > 0 ? <StarRating rating={restaurant.rating} count={restaurant.count} /> : 'No Ratings'}\n        </div>\n      </div>\n      {state.loggedIn && (\n        <div className=\"admin-btn-container my-3\">\n          <Link className=\"admin-btn btn mx-2\" to={`/restaurant/${restaurant.id}/update`}>\n            <i className=\"fa fa-camera\" aria-hidden=\"true\"></i> Add Photo(s)\n          </Link>\n          <Link className=\"admin-btn btn mx-2\" to={`/restaurant/${restaurant.id}/update`}>\n            <i className=\"fa fa-pencil\" aria-hidden=\"true\"></i> Edit Restaurant\n          </Link>\n          <button className=\"admin-btn btn mx-2\" onClick={() => handleDelete(restaurant.id)}>\n            <i className=\"fa fa-trash-o\" aria-hidden=\"true\"></i> Delete Restaurant\n          </button>\n        </div>\n      )}\n      {!state.loggedIn && (\n        <div className=\"admin-btn-container my-3\">\n          <button className=\"admin-btn btn mx-2\" onClick={() => scrollToReviewSection()}>\n            <i className=\"fa fa-star-o\" aria-hidden=\"true\"></i> Write Review\n          </button>\n        </div>\n      )}\n      <div className=\"restaurant-details-background\">\n        <div className=\"d-flex restaurant-details-container\">\n          <div className=\"restaurant-details-map-container\">\n            <RestaurantMap restaurant={restaurant} />\n          </div>\n          <div className=\"details-list\">\n            <h4>{restaurant.name} Details:</h4>\n            <div>\n              Address:\n              <p>\n                {restaurant.street}, {restaurant.city}, {restaurant.province}, {restaurant.country}\n              </p>\n            </div>\n            <div>\n              Description:\n              <p>{restaurant.description}</p>\n            </div>\n            <div className=\"mb-2\">Price Range: {getDollarSignValue(restaurant.pricerange)}</div>\n            <div>\n              {restaurant.rating >= 3 ? (\n                <p className=\"text-success my-0\">\n                  <i className=\"fa fa-check-square-o mr-2\" aria-hidden=\"true\"></i>Above Average Rating\n                </p>\n              ) : (\n                <p className=\"text-danger my-0\">\n                  <i className=\"fa fa-times mr-2\" aria-hidden=\"true\"></i>Below Average Rating\n                </p>\n              )}\n              {restaurant.pricerange <= 4 ? (\n                <p className=\"text-success my-0\">\n                  <i className=\"fa fa-check-square-o mr-2\" aria-hidden=\"true\"></i>Affordable Food\n                </p>\n              ) : (\n                <p className=\"text-danger my-0\">\n                  <i className=\"fa fa-times mr-2\" aria-hidden=\"true\"></i>Expensive Food\n                </p>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <NewRatingInput id={id} setRatings={setRatings} ratings={ratings} setRestaurant={setRestaurant} restaurant={restaurant} setRatingsCollection={setRatingsCollection} />\n      <div className=\"restaurant-reviews-container mt-3\">\n        {ratings && (\n          <>\n            {ratings.map(review => {\n              return <RestaurantReview key={review.id} review={review} setRatings={setRatings} ratings={ratings} setRestaurant={setRestaurant} restaurant={restaurant} setRatingsCollection={setRatingsCollection} />\n            })}\n            {isMoreRatings && (\n              <>\n                <div className=\"text-center mt-4\">\n                  <button className=\"admin-btn btn\" onClick={() => setCounter(prev => prev + 4)}>\n                    <i className=\"fa fa-stack-overflow mr-2\" aria-hidden=\"true\"></i> Load More Ratings\n                  </button>\n                </div>\n              </>\n            )}\n          </>\n        )}\n        {!ratings.length && <p className=\"text-center\">This restaurant does not have any reviews.</p>}\n      </div>\n    </>\n  )\n}\n\nexport default RestaurantDetails\n","import React, { useEffect } from 'react'\nimport { Link } from 'react-router-dom'\n\nfunction PageNotFound(props) {\n  return (\n    <>\n      <h1>404 Error</h1>\n      <div>Page not found</div>\n      <Link to=\"/\">Return Home</Link>\n    </>\n  )\n}\n\nexport default PageNotFound\n","import React, { useEffect, useState, useCallback, useContext } from 'react'\nimport axios from 'axios'\nimport AppContext from '../AppContext'\nimport { Link } from 'react-router-dom'\n\nfunction Searchbar(props) {\n  const [searchQuery, setSearchQuery] = useState('')\n  const [searchResults, setSearchResults] = useState([])\n  const [searchLoading, setSearchLoading] = useState(false)\n  const [showResults, setShowResults] = useState(false)\n  const dispatch = useContext(AppContext)\n  let timer\n\n  const fetchResults = async () => {\n    try {\n      let response = await axios.get(`/api/query/${searchQuery}`)\n      if (response.data.length) {\n        setSearchResults(response.data)\n      } else {\n        setSearchResults([])\n      }\n      setSearchLoading(false)\n    } catch (err) {\n      dispatch({ type: 'FlashMessage', value: err.response.data, color: 'error' })\n    }\n  }\n\n  // Hides search results if click is made anywhere on the page, other than on the input field\n  const handleHideResults = useCallback(e => {\n    if (e.target !== document.querySelector('.search-input')) {\n      setShowResults(false)\n    }\n  }, [])\n\n  // Sets event listener whenever results are shown & removes the results when a click is made anywhere on the page\n  useEffect(() => {\n    if (showResults) {\n      document.addEventListener('click', handleHideResults)\n    }\n    return () => document.removeEventListener('click', handleHideResults)\n  }, [showResults])\n\n  useEffect(() => {\n    if (searchQuery.length) {\n      setSearchLoading(true)\n      timer = setTimeout(fetchResults, 300)\n    } else {\n      setSearchLoading(false)\n      setSearchResults([])\n    }\n    return () => clearTimeout(timer)\n  }, [searchQuery])\n\n  return (\n    <div className=\"nav-search\">\n      {searchLoading && <div className=\"loader\"></div>}\n      <div className=\"search-icon\">\n        <i className=\"fa fa-search\" aria-hidden=\"true\"></i>\n      </div>\n      <input type=\"text\" className=\"search-input\" placeholder=\"Search...\" value={searchQuery} onChange={e => setSearchQuery(e.currentTarget.value)} onClick={() => setShowResults(true)} />\n      {showResults && searchResults.length > 0 && (\n        <>\n          <div className=\"search-results-decoration\"></div>\n          <ul className=\"search-results\">\n            {searchResults.map(result => {\n              return <SingleSearchResult key={result.id} {...result} setSearchQuery={setSearchQuery} />\n            })}\n          </ul>\n        </>\n      )}\n    </div>\n  )\n}\n\nfunction SingleSearchResult(props) {\n  return (\n    <li className=\"search-result\">\n      <Link to={`/restaurant/${props.id}`} className=\"search-result-link\" onClick={() => props.setSearchQuery('')}>\n        <h6 className=\"search-result-name\">{props.name}</h6>\n        <p className=\"search-result-address\">\n          {props.city}, {props.province}, {props.country}\n        </p>\n      </Link>\n    </li>\n  )\n}\n\nexport default Searchbar\n","import React, { useEffect, useContext, useState } from 'react'\nimport { Link, useLocation } from 'react-router-dom'\nimport Searchbar from './Searchbar'\nimport AppContext from '../AppContext'\nimport StateContext from '../StateContext'\n\nfunction Header(props) {\n  const dispatch = useContext(AppContext)\n  const state = useContext(StateContext)\n  const [page, setPage] = useState()\n  const location = useLocation()\n\n  useEffect(() => {\n    if (location.pathname == '/') {\n      setPage('home')\n    } else if (location.pathname == '/restaurant/create') {\n      setPage('create')\n    } else {\n      setPage('')\n    }\n  }, [location.pathname])\n\n  function switchView() {\n    if (state.loggedIn) {\n      dispatch({ type: 'Logout' })\n    } else {\n      dispatch({ type: 'Login' })\n    }\n  }\n  return (\n    <>\n      <nav className=\"navbar navbar-expand-xl navbar-dark bg-dark\">\n        <Link className=\"navbar-brand\" to=\"/\">\n          <i className=\"fa fa-ravelry\" aria-hidden=\"true\"></i>Review App\n        </Link>\n        <Searchbar />\n        <button className=\"navbar-toggler ml-auto\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n          <span className=\"navbar-toggler-icon\"></span>\n        </button>\n\n        <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n          <ul className=\"navbar-nav ml-auto\">\n            <li className={`nav-item desktop-nav-item ` + (page == 'home' ? 'active' : '')}>\n              <Link to=\"/\" className=\"nav-link\">\n                Home\n              </Link>\n            </li>\n            {state.loggedIn && (\n              <li className={`nav-item desktop-nav-item ` + (page == 'create' ? 'active' : '')}>\n                <Link to=\"/restaurant/create\" className=\"nav-link\">\n                  Create Restaurant\n                </Link>\n              </li>\n            )}\n            <li className={`nav-item mobile-nav-item my-1 ` + (page == 'home' ? 'active' : '')}>\n              <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                <Link to=\"/\" className=\"nav-link\">\n                  Home\n                </Link>\n              </button>\n            </li>\n            {state.loggedIn && (\n              <li className={`nav-item mobile-nav-item my-1 ` + (page == 'create' ? 'active' : '')}>\n                <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                  <Link to=\"/restaurant/create\" className=\"nav-link\">\n                    Create Restaurant\n                  </Link>\n                </button>\n              </li>\n            )}\n            <li className=\"nav-item my-1\">\n              <button className=\"btn btn-light\" onClick={switchView}>\n                Switch View\n              </button>\n            </li>\n          </ul>\n        </div>\n      </nav>\n      <div className=\"home-header\">\n        <p>Click the switch button in navbar to see the {state.loggedIn ? 'user' : 'admin'} view</p>\n      </div>\n    </>\n  )\n}\n\nexport default Header\n","import React, { useEffect } from 'react'\nimport { Link } from 'react-router-dom'\n\nfunction Footer(props) {\n  return <div className=\"my-5\"></div>\n}\n\nexport default Footer\n","import React, { useEffect } from 'react'\n\nfunction FlashMessage({ state }) {\n  function handleRemove(e) {\n    e.currentTarget.style.display = 'none'\n  }\n\n  function getColor(color) {\n    if (color == 'success') {\n      return 'alert-success'\n    } else if (color == 'error') {\n      return 'alert-danger'\n    }\n  }\n\n  return (\n    <div className=\"flash-message-container\">\n      {state.flashMessages.length > 0 &&\n        state.flashMessages.map((flashMessage, index) => {\n          return (\n            <div key={index} className={'alert ' + getColor(flashMessage.color)} onAnimationEnd={e => handleRemove(e)}>\n              {flashMessage.message}\n            </div>\n          )\n        })}\n    </div>\n  )\n}\n\nexport default FlashMessage\n","import React, { useState, useContext, useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport axios from 'axios'\nimport AppContext from '../AppContext'\nimport StateContext from '../StateContext'\n\nfunction CreateRestaurantPage(props) {\n  const [restaurant, setRestaurant] = useState({\n    name: '',\n    description: '',\n    pricerange: '',\n    street: '',\n    city: '',\n    province: '',\n    country: '',\n    postalcode: ''\n  })\n  const [file, setFile] = useState()\n  const [uploadedImages, setUploadedImages] = useState()\n\n  let history = useHistory()\n  const dispatch = useContext(AppContext)\n  const state = useContext(StateContext)\n\n  async function submitHandler(e) {\n    e.preventDefault()\n    try {\n      let location = `${restaurant.street} ${restaurant.city} ${restaurant.province} ${restaurant.country}`\n      const apiResponse = await axios.get('https://maps.googleapis.com/maps/api/geocode/json', {\n        params: {\n          address: location,\n          key: 'AIzaSyCcbP47PnbbLWJ4T9GdciB5LCrFSSIP-EA'\n        }\n      })\n      let lat = apiResponse.data.results[0].geometry.location.lat\n      let lng = apiResponse.data.results[0].geometry.location.lng\n\n      // Add restaurant to database\n      const response = await axios.post(`/api/restaurants`, {\n        name: restaurant.name,\n        description: restaurant.description,\n        priceRange: parseInt(restaurant.pricerange),\n        street: restaurant.street,\n        city: restaurant.city,\n        province: restaurant.province,\n        country: restaurant.country,\n        postalcode: restaurant.postalcode,\n        longtitude: lng,\n        latitude: lat\n      })\n\n      if (file) {\n        let formData = new FormData()\n        for (let i = 0; i < file.length; i++) {\n          formData.append(`image`, file[i])\n        }\n\n        await axios.post(`/api/restaurants/upload-image/${response.data.id}`, formData, {\n          headers: { 'Content-Type': 'multipart/form-data' }\n        })\n      }\n\n      dispatch({ type: 'FlashMessage', value: 'Restaurant was successfully created!', color: 'success' })\n      history.push(`/restaurant/${response.data.id}`)\n    } catch (err) {\n      dispatch({ type: 'FlashMessage', value: err.response.data, color: 'error' })\n    }\n  }\n\n  // Update field input\n  function updateInput(e) {\n    setRestaurant({ ...restaurant, [e.currentTarget.name]: e.currentTarget.value })\n  }\n\n  // Update File State\n  function updateFileState(e) {\n    let urlList = []\n    let files = []\n    // Loops over uploaded files, and only saves png/jpeg files that are below 2MB\n    for (var i = 0, n = e.currentTarget.files.length; i < n; i++) {\n      let currentFile = e.currentTarget.files[i]\n      if (currentFile.type == 'image/png' || currentFile.type == 'image/jpeg') {\n        // Make sure file is less than 2MB\n        if (currentFile.size < 2097152) {\n          files.push(currentFile)\n          urlList.push(URL.createObjectURL(currentFile))\n        } else {\n          dispatch({ type: 'FlashMessage', value: `${currentFile.name} is too big! Images must be below 2MB`, color: 'error' })\n        }\n      }\n    }\n    setFile(files)\n    setUploadedImages(urlList)\n  }\n\n  // Redirect if user not logged in\n  useEffect(() => {\n    if (!state.loggedIn) {\n      dispatch({ type: 'FlashMessage', value: 'You do not have the authorization to view that page.', color: 'error' })\n      history.push('/')\n    }\n  }, [state.loggedIn])\n\n  return (\n    <>\n      <div className=\"restaurant-form\">\n        <h1 className=\"create-title\">Create New Restaurant</h1>\n        <form onSubmit={submitHandler}>\n          <div className=\"form-group\">\n            <label htmlFor=\"name\">Name:</label>\n            <input className=\"form-control\" id=\"name\" name=\"name\" placeholder=\"Name\" type=\"text\" value={restaurant.name} onChange={e => updateInput(e)} required />\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"street\">Street:</label>\n            <input className=\"form-control\" id=\"street\" name=\"street\" placeholder=\"Street\" type=\"text\" value={restaurant.street} onChange={e => updateInput(e)} required />\n          </div>\n          <div className=\"form-row\">\n            <div className=\"form-group col-md-4\">\n              <label htmlFor=\"city\">City:</label>\n              <input className=\"form-control\" id=\"city\" name=\"city\" placeholder=\"City\" type=\"text\" value={restaurant.city} onChange={e => updateInput(e)} required />\n            </div>\n            <div className=\"form-group col-md-4\">\n              <label htmlFor=\"province\">Province:</label>\n              <input className=\"form-control\" id=\"province\" name=\"province\" placeholder=\"Province\" type=\"text\" value={restaurant.province} onChange={e => updateInput(e)} required />\n            </div>\n            <div className=\"form-group col-md-4\">\n              <label htmlFor=\"country\">Country:</label>\n              <input className=\"form-control\" id=\"country\" name=\"country\" placeholder=\"Country\" type=\"text\" value={restaurant.country} onChange={e => updateInput(e)} required />\n            </div>\n          </div>\n\n          <div className=\"form-row\">\n            <div className=\"form-group col-md-4\">\n              <label htmlFor=\"postalcode\">Postal Code:</label>\n              <input className=\"form-control\" id=\"postalcode\" name=\"postalcode\" placeholder=\"Postal Code\" type=\"text\" value={restaurant.postalcode} onChange={e => updateInput(e)} required />\n            </div>\n            <div className=\"form-group col-md-4\">\n              <label htmlFor=\"pricerange\">Price Range:</label>\n              <input className=\"form-control\" id=\"pricerange\" name=\"pricerange\" placeholder=\"Price Range\" type=\"number\" value={restaurant.pricerange} onChange={e => updateInput(e)} required max=\"5\" min=\"1\" />\n            </div>\n            <div className=\"form-group col-md-4\">\n              <label>Add Photos (Optional):</label>\n              <div className=\"custom-file\">\n                <input type=\"file\" className=\"custom-file-input\" id=\"image-file\" onChange={updateFileState} multiple />\n                <label className=\"custom-file-label\" htmlFor=\"image-file\">\n                  Choose file...\n                </label>\n              </div>\n            </div>\n          </div>\n          {uploadedImages && uploadedImages[0] && <label>Restaurant Images:</label>}\n          <div className=\"image-container\">\n            {uploadedImages &&\n              uploadedImages.map((url, index) => (\n                <div key={index}>\n                  <div style={{ width: '70px', height: '70px' }}>\n                    <img style={{ width: '70px', height: '70px' }} src={url} />\n                  </div>\n                </div>\n              ))}\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"description\">Description:</label>\n            <textarea className=\"form-control\" id=\"description\" name=\"description\" placeholder=\"Description\" type=\"text\" value={restaurant.description} onChange={e => updateInput(e)} required />\n          </div>\n          <div className=\"my-4\"></div>\n          <button type=\"submit\" className=\"btn create-btn btn-block mx-auto\">\n            Create Restaurant\n          </button>\n        </form>\n      </div>\n    </>\n  )\n}\n\nexport default CreateRestaurantPage\n","import React, { useReducer } from 'react'\nimport { BrowserRouter, Switch, Route } from 'react-router-dom'\n\nimport AppContext from './AppContext'\nimport StateContext from './StateContext'\n\n// Components\nimport Home from './components/Home'\nimport UpdateRestaurant from './components/UpdateRestaurant'\nimport RestaurantDetails from './components/RestaurantDetails'\nimport PageNotFound from './components/PageNotFound'\nimport Header from './components/Header'\nimport Footer from './components/Footer'\nimport FlashMessage from './components/FlashMessage'\nimport CreateRestaurantPage from './components/CreateRestaurantPage'\n\nfunction App() {\n  const initialState = {\n    flashMessages: [],\n    loggedIn: Boolean(localStorage.getItem('yelp-admin'))\n  }\n\n  const reducer = (state, action) => {\n    switch (action.type) {\n      case 'FlashMessage':\n        return { ...state, flashMessages: state.flashMessages.concat({ message: action.value, color: action.color }) }\n      case 'Login':\n        localStorage.setItem('yelp-admin', true)\n        return { ...state, loggedIn: true }\n      case 'Logout':\n        localStorage.removeItem('yelp-admin')\n        return { ...state, loggedIn: false }\n    }\n  }\n\n  const [state, dispatch] = useReducer(reducer, initialState)\n  return (\n    <AppContext.Provider value={dispatch}>\n      <StateContext.Provider value={state}>\n        <BrowserRouter>\n          <Header />\n          <FlashMessage state={state} />\n          <Switch>\n            <Route path=\"/\" exact>\n              <Home />\n            </Route>\n            <Route path=\"/restaurant/create\">\n              <CreateRestaurantPage />\n            </Route>\n            <Route path=\"/restaurant/:id\" exact>\n              <RestaurantDetails />\n            </Route>\n            <Route path=\"/restaurant/:id/update\">\n              <UpdateRestaurant />\n            </Route>\n            <Route path=\"*\">\n              <PageNotFound />\n            </Route>\n          </Switch>\n          <Footer />\n        </BrowserRouter>\n      </StateContext.Provider>\n    </AppContext.Provider>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <>\n    <App />\n  </>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}